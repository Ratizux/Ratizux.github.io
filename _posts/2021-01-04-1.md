---
layout: post
title: '用 Tesseract 识别图像中的文字'
---
[Tesseract](https://github.com/tesseract-ocr/tesseract)，开源的 OCR 引擎，支持多种语言。

# 安装使用

Tesseract 已进入 openSUSE 官方软件源，直接使用 zypper 安装即可：

```sudo zypper in tesseract-ocr tesseract-ocr-traineddata-chinese_simplified```

Tesseract 使用较为简单，使用 `tesseract` 命令即可。比如用 Tesseract 识别名为 input.png 的图像：

```
> tesseract input.png -l chi_sim -
崔林字德儒， 清河东武城人也。 少时晚成， 宗族莫知, 惟从兄琰异之。 枣祺定冀州′
召除邬长， 贫元车马， 单步之官。 太祖征壶关， 问长吏德政最者' 并州刺史张陟以林对′
于是耀为冀州主簿， 徙署别驾、 丞相橡属。 魏国既建， 稍迂御史中丞。

丈帝践咋, 拜尚书， 出为幽州刺史。 北中郎将吴质统河北军事， 涿郡太守王雄谓林别
驾曰: ″吴中郎将, 上所亲重′ 国之责臣也。 仗节统事, 州郡莫不奉笺致敬， 而崔使君初
不与相闻。 芳以边塞不修斩卿, 使君宁能护卿邪? ″ 别驾具以白林, 林曰: “刺史视去此
州如脱展， 宁当相累邪? 此州与胡虏接， 宜镇之以静， 扰之则动其逆心, 特为国家生北顾
忧， 以此为寄。 ” 在官′期, 寇窃寝息; 犹以不事上司，_ 左迂河问太守, 清论多为林怨也。

迂大鸿胪。 龟兹王遣倩予米朝, 朝廷嘉其远至, 褒赏其王甚厚。 余国各遣予未朝′ 间
使连属， 林恐所遣或非具的, 权取疏属贾胡， 因通使命， 利得印绶， 而道路护送， 所损滋
多。 劳所养之民, 资无益之亭, 为夷狄所笑. 此襄时之所患也。 乃矛多书敦煌喻指， 并录前
世待遇诸国丰约故事， 使有恒常。 明帝即位】 赐爵关内侯, 转光禄勋、 司隶校尉。 属郡皆
罢非法除过员吏。 林为玫椎诫, 简存大体, 是以去后每辄见思。

散骑常侍刘劭作考瀑论， 制下百僚。 林议日: “案周官考课】 其文各矣， 自康王以下，
遂以陵返, 此即考课之法存乎其人也。 及汉之季其失岂在乎佐吏之职不密哉方今军旅或猥
或卒备之以科条申之以内外增减元常固难′矣。 《易》 日: ′易苘而天下之理得矣。 ' ”

景初元年, 司徒` 司空并缺, 散骑侍郎孟康荐林。 后年遂为司空， 封安阳亭侯, 邑六
百户。 三公封列侯， 自林始也。 顷之】 又迸封安阳乡侯。 正始五年芫， 谥日孝侯。

```

`-l` 选项用来选择语言，`-` 代表以标准输出方式将结果输出。

不过它的性能不太好，转换时似乎只使用了单个 CPU。

Tesseract 也支持 WebP 图片，但识别 30% 质量压缩的图片效果不太好：

```
> tesseract /tmpfs/notitle.webp -l chi_sim -
Warning. Invalid resolution 0 dpi. Using 70 instead.
Detected 227 diacritics
崔林宇德儒， 清河东武城人也。 少时晚成， 宗族莫知, 帷从兄琰异之。 枣祖定冀州′
召除邬长， 贫元车马, 单步之官。 太祖征壶关, 问长吏德政最者′ 并州刺史张陟以林对′
于是耀为冀州主薄， 徒署月月驾、 丞相橡属。 魏国既送， 稍迂御史中丞。
丈帝践降′ 拜尚书， 出为幽州刺史。 北中郎将吴质统河北军事， 涿郡太守王雄谓林别
驾曰: “吴中郎将， 上所亲重' 国之责臣也。 位节统事, 州郡莫不奉笺致送 而崔位君初
不与相闻。 芳以边塞不修斩卿， 使君宁能护卿邪? ” 月月菖皇、以白整】 桂曰: “剌史视去此
州如脱蜃= 宝当相皇邪? 此州与胡虏接， 宜镇之以静, 扰之则动其送心， 特为国家生北顾
忧， 以此为寄。 ” 在官′期, 寇窃寝息; 犹以不事上司，_ 左迂河问太守' 清论多为林怨也。
迂大鸿胪。 龟兹王送侍予来朝 朝送嘉其送至 褒赏其王甚厚 余国各送予未朝 间
使送属 林恐所送或非具的 权取疏属贾胡 因送使命 利得印送 而送路护送 所损送
` 月 ` ` 月 恐也 乃月多书敦煌喻指 并录前
世待送诸国半约故事 使有恒常 明帝即位 赐爵关内侯 转光禄勋、 司隶校月月。 属郡皆
罢非法除送员吏。 林为玫椎诫, 苘存大体, 是以去后恐辄见恐。
散骑常侍刘劭作考课论 制下百僚。 林月又日: “案周官考深 其文备矣 自康王以下
` :' ` `方/′\′ ` `.
′、 一 _ 《易》 曰 ′易苘而天下之理得矣。 ' ”
景初元年 司徒` 司空并缺 散骑侍郎孟康荐林 后年送为司空， 封安阳亭侯 邑'
百户 三公封列侯】 自林始也。 顷之 又送封安阳乡侯。 正始五年送 谥日孝候。

 

 
 

  


```

*结尾的大量换行确实是 Tesseract 加入的。*

参考原文：
> 崔林字德儒，清河东武城人也。少时晚成，宗族莫知,惟从兄琰异之。太祖定冀州，召除邬长，贫无车马，单步之官。太祖征壶关，问长吏德政最者，并州刺史张陟以林对，于是耀为冀州主簿，徙署别驾、丞相掾属。魏国既建，稍迁御史中丞。<br/>
文帝践阼，拜尚书，出为幽州刺史。北中郎将吴质统河北军事，涿郡太守王雄谓林别驾曰：“吴中郎将，上所亲重，国之贵臣也。仗节统事，州郡莫不奉笺致敬，而崔使君初不与相闻。若以边塞不修斩卿，使君宁能护卿邪? ″别驾具以白林，林曰：“刺史视去此州如脱屐，宁当相累邪？此州与胡虏接，宜镇之以静，扰之则动其逆心, 特为国家生北顾忧，以此为寄。”在官一期，寇窃寝息；犹以不事上司，左迁河间太守，清论多为林怨也。<br/>迁大鸿胪。龟兹王遣侍子来朝，朝廷嘉其远至，褒赏其王甚厚。余国各遣子来朝，间使连属，林恐所遣或非真的，权取疏属贾胡，因通使命，利得印绶，而道路护送，所损滋多。劳所养之民，资无益之事，为夷狄所笑，此曩时之所患也。乃移书敦煌喻指，并录前世待遇诸国丰约故事，使有恒常。明帝即位，赐爵关内侯，转光禄勋、司隶校尉。属郡皆罢非法除过员吏。林为政推诚，简存大体，是以去后每辄见思。<br/>散骑常侍刘劭作考课论，制下百僚。林议曰：“案周官考课，其文备矣，自康王以下，遂以陵迟，此即考课之法存乎其人也。及汉之季，其失岂在乎佐吏之职不密哉，方今军旅，或猥或卒，备之以科条，申之以内外，增减无常，固难一矣。《易》曰：‘易简而天下之理得矣。’”<br/>景初元年, 司徒、司空并缺, 散骑侍郎孟康荐林。后年遂为司空，封安阳亭侯，邑六百户。三公封列侯，自林始也。顷之，又进封安阳乡侯。正始五年薨，谥日孝侯。

![Original]({{site.url}}/res/tesseract/notitle.webp)

这是用于第二次识别的 WebP 图片。
